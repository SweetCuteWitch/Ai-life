(()=>{"use strict";const e=document.getElementById("canvas"),t=e.getContext("2d");t.imageSmoothingEnabled=!1;const n=[],o=[],i=(e,n,o,i)=>{t.fillStyle=o,t.fillRect(e,n,i,i)},l=(e,t,o)=>{const i={from:e,to:t,g:o};return n.push(i),i},a=()=>500*Math.random(),r=()=>{d||n.forEach((t=>((t,n,o)=>{for(let i=0;i<t.length;i++){let l=0,a=0;const r=t[i];for(let e=0;e<n.length;e++){const t=n[e],i=r.x-t.x,d=r.y-t.y,c=Math.sqrt(i*i+d*d);if(c>0&&c<80){const e=-o/c;l+=e*i,a+=e*d}}r.vx=.5*(r.vx+l),r.vy=.5*(r.vy+a),r.x+=r.vx,r.y+=r.vy,(r.x<=0||r.x>=e.width)&&(r.vx*=-1),(r.y<=0||r.y>=e.width)&&(r.vy*=-1)}})(t.from.particles,t.to.particles,t.g))),t.clearRect(0,0,e.width,e.width),i(0,0,"black",e.width),o.forEach((e=>i(e.x,e.y,e.color,e.size))),requestAnimationFrame(r)};let d=!1;const c=document.getElementById("color_input"),s=document.getElementById("number_input"),u=document.getElementById("add"),g=document.getElementById("groups"),h=document.getElementById("rules"),m=document.getElementById("pause");let v="",y=0;const p=[],w=()=>{v=`#${Math.floor(16777215*Math.random()).toString(16)}`,c.value=v,y=Math.floor(1e3*Math.random()),s.value=y};c.addEventListener("input",(e=>{v=e.target.value})),s.addEventListener("input",(e=>{y=e.target.value,e.target.value>1e3&&(y=1e3,s.value=1e3),e.target.value<0&&(y=0,s.value=0)})),u.addEventListener("click",(()=>{const e=((e,t,n,i)=>{const l=[];for(let n=0;n<e;n++)l.push({x:a(),y:a(),vx:0,vy:0,color:t,size:5});return o.push(...l),{name:i,particles:l}})(y,v,0,p.length);p.push(e),w(),g.innerHTML="",p.forEach((t=>{g.innerHTML+=`\n      <div class="group" style="background: ${t.particles[0].color}">\n        <label style="color: ${t.particles[0].color}">${t.name} ${t.particles.length}</label>\n      </div>\n      `,l(e,t,0),e.name!==t.name&&l(t,e,0)})),h.innerHTML="",n.forEach((e=>{h.innerHTML+=`\n      <div>\n        <label>${e.from.name}</label>\n        <input\n          class="g_input"\n          type="range"\n          min="-2"\n          max="2"\n          value="0"\n          step="0.001"\n        />\n        <label>${e.to.name}</label>\n      </div>`}));const t=document.getElementsByClassName("g_input");for(let e=0;e<t.length;e++)t[e].addEventListener("input",(t=>{n[e].g=t.target.value}))})),m.addEventListener("click",(()=>{d=!d,m.innerHTML=d?"Continue":"Pause"}));const E=document.getElementById("canvas");E.getContext("2d").imageSmoothingEnabled=!1,window.onload=()=>{window.innerHeight>window.innerWidth?(E.width=window.innerWidth-10,E.height=window.innerWidth-10):(E.width=window.innerHeight-10,E.height=window.innerHeight-10),document.body.height=window.innerHeight,w(),r()}})();
